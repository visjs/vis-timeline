<html>
  <head>
    <meta charset="utf-8" />
    <title>Graph2d | Performance</title>
  </head>
  <body>
    <form
      id="form"
      action="https://codepen.io/pen/define"
      method="post"
      target="_self"
    >
      <input
        type="hidden"
        name="data"
        value='{"css":"body,\nhtml {\n  font-family: arial, sans-serif;\n  font-size: 11pt;\n}\nspan.label {\n  width: 150px;\n  display: inline-block;\n}\n","css_external":"https://visjs.github.io/vis-timeline/styles/vis-timeline-graph2d.min.css","html":"<h2>Graph2d | Performance</h2>\n<div style=\"width: 700px; font-size: 14px; text-align: justify\">\n  This example is a test of the performance of the Graph2d. Select the amount of\n  datapoints you want to plot and press draw. You can choose between the style\n  of the points as well as the interpolation method. This can only be toggled\n  with the buttons. The interpolation options may not look different for this\n  dataset but you can see their effects clearly in example 7.\n  <br /><br />\n  Linear interpolation and no points are the settings that will render quickest.\n  By default, Graph2d will downsample when there are more than 1 point per\n  pixel. This can be manually disabled at the cost of performance by using the\n  <code>sampling</code> option.\n</div>\n<br />\n<p>\n  <span class=\"label\">Number of items:</span><input id=\"count\" value=\"50000\" />\n  <input id=\"draw\" type=\"button\" value=\"draw\" style=\"width: 200px\" />\n  <span id=\"description\"><b>Click the draw button to load the data!</b></span>\n  <br />\n\n  <span class=\"label\">Interpolation method:</span\n  ><input id=\"interpolation\" value=\"linear\" />\n  <input\n    id=\"toggleInterpolation\"\n    type=\"button\"\n    value=\"toggle Interpolation\"\n    style=\"width: 200px\"\n  />\n  <br />\n  <span class=\"label\">Points style:</span><input id=\"points\" value=\"none\" />\n  <input\n    id=\"togglePoints\"\n    type=\"button\"\n    value=\"toggle Points\"\n    style=\"width: 200px\"\n  />\n</p>\n<div id=\"visualization\"></div>\n","js":"var points = \"none\";\nvar interpolation = \"linear\";\n\nfunction togglePoints() {\n  var pointsOptions = {};\n  var pointsField = document.getElementById(\"points\");\n  if (points == \"none\") {\n    points = \"circle\";\n    pointsOptions = { drawPoints: { style: points } };\n  } else if (points == \"circle\") {\n    points = \"square\";\n    pointsOptions = { drawPoints: { style: points } };\n  } else if (points == \"square\") {\n    points = \"none\";\n    pointsOptions = { drawPoints: false };\n  }\n  pointsField.value = points;\n\n  graph2d.setOptions(pointsOptions);\n}\n\nfunction toggleInterpolation() {\n  var interpolationOptions = {};\n  var interpolationField = document.getElementById(\"interpolation\");\n  if (interpolation == \"linear\") {\n    interpolation = \"centripetal\";\n    interpolationOptions = {\n      interpolation: { parametrization: interpolation },\n    };\n  } else if (interpolation == \"centripetal\") {\n    interpolation = \"chordal\";\n    interpolationOptions = {\n      interpolation: { parametrization: interpolation },\n    };\n  } else if (interpolation == \"chordal\") {\n    interpolation = \"uniform\";\n    interpolationOptions = {\n      interpolation: { parametrization: interpolation },\n    };\n  } else if (interpolation == \"uniform\") {\n    interpolation = \"linear\";\n    interpolationOptions = { interpolation: false };\n  }\n  interpolationField.value = interpolation;\n  graph2d.setOptions(interpolationOptions);\n}\n\n// create a dataset with items\nvar now = moment().minutes(0).seconds(0).milliseconds(0);\nvar dataset = new vis.DataSet({\n  type: { start: \"ISODate\", end: \"ISODate\" },\n});\n\nvar startPoint = now;\nvar endPoint = now + 3600000 * 5000;\n\n// create data -- this is seperated into 3 functions so we can update the span.\nfunction createData() {\n  var span = document.getElementById(\"description\");\n  span.innerHTML = \"Generating data... (just javascript, not vis.graph2D)...\";\n  setTimeout(generateData, 10);\n}\n\nfunction generateData() {\n  var count = parseInt(document.getElementById(\"count\").value) || 100;\n  var newData = [];\n  var span = document.getElementById(\"description\");\n  var start = now;\n  for (var i = 0; i < count; i++) {\n    var yval =\n      Math.sin(i / 100) * Math.cos(i / 50) * 50 + Math.sin(i / 1000) * 50;\n    newData.push({ id: i, x: start + 3600000 * i, y: yval });\n  }\n  span.innerHTML = \"Loading data into Graph2d...\";\n  setTimeout(function () {\n    loadDataIntoVis(newData);\n  }, 10);\n}\n\nfunction loadDataIntoVis(newData) {\n  var span = document.getElementById(\"description\");\n  dataset.clear();\n  dataset.add(newData);\n  span.innerHTML = \"Done!\";\n}\n\ndocument.getElementById(\"draw\").onclick = createData;\ndocument.getElementById(\"toggleInterpolation\").onclick = toggleInterpolation;\ndocument.getElementById(\"togglePoints\").onclick = togglePoints;\n\nvar container = document.getElementById(\"visualization\");\nvar options = {\n  sampling: true,\n  drawPoints: { enabled: false, size: 3 },\n  interpolation: false,\n  start: startPoint,\n  end: endPoint,\n};\n\nvar graph2d = new vis.Graph2d(container, dataset, options);\n","js_external":"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js;https://visjs.github.io/vis-timeline/standalone/umd/vis-timeline-graph2d.min.js","title":"Graph2d | Performance"}'
      />
      <button id="open" alt="JSFiddle" title="JSFiddle">Open CodePen</button>
    </form>

    <script type="text/javascript">
      document.getElementById("open").click();
    </script>
  </body>
</html>
