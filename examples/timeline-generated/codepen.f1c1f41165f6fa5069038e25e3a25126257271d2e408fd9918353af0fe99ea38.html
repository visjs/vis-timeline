<html>
  <head>
    <meta charset="utf-8" />
    <title>Timeline | other | Drag &amp; Drop</title>
  </head>
  <body>
    <form
      id="form"
      action="https://codepen.io/pen/define"
      method="post"
      target="_self"
    >
      <input
        type="hidden"
        name="data"
        value='{"css":"li.item {\n  list-style: none;\n  width: 150px;\n  color: #1a1a1a;\n  background-color: #d5ddf6;\n  border: 1px solid #97b0f8;\n  border-radius: 2px;\n  margin-bottom: 5px;\n  padding: 5px 12px;\n}\nli.item:before {\n  content: \"≣\";\n  font-family: Arial, sans-serif;\n  display: inline-block;\n  font-size: inherit;\n  cursor: move;\n}\nli.object-item {\n  list-style: none;\n  width: 150px;\n  color: #1a1a1a;\n  background-color: #d5ddf6;\n  border: 1px solid #97b0f8;\n  border-radius: 2px;\n  margin-bottom: 5px;\n  padding: 5px 12px;\n}\nli.object-item:before {\n  content: \"≣\";\n  font-family: Arial, sans-serif;\n  display: inline-block;\n  font-size: inherit;\n  cursor: move;\n}\n.items-panel {\n  display: flex;\n  justify-content: space-around;\n}\n","css_external":"","html":"<h1>Timeline Drag &amp;amp; Drop Example</h1>\n\n<p>\n  For this to work, you will have to define your own\n  <code>&apos;dragstart&apos;</code> eventListener on each item in your list of items\n  (make sure that any new item added to the list is attached to this\n  eventListener &apos;dragstart&apos; handler). This &apos;dragstart&apos; handler must set\n  <code>dataTransfer</code> - notice you can set the item&apos;s information as you\n  want this way.\n</p>\n\n<div id=\"visualization\"></div>\n\n<div class=\"items-panel\">\n  <div class=\"side\">\n    <h3>Items:</h3>\n    <ul class=\"items\">\n      <li draggable=\"true\" class=\"item\">item 1 - box</li>\n      <li draggable=\"true\" class=\"item\">item 2 - point</li>\n      <li draggable=\"true\" class=\"item\">item 3 - range</li>\n      <li draggable=\"true\" class=\"item\">\n        item 3 - range - fixed times - <br />\n        (start: now, end: now + 10 min)\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"side\">\n    <h3>Object with \"target:&apos;item&apos;\":</h3>\n    <li draggable=\"true\" class=\"object-item\">object with target:&apos;item&apos;</li>\n  </div>\n</div>\n","js":"// create groups\nvar numberOfGroups = 3;\nvar groups = new vis.DataSet();\nfor (var i = 0; i < numberOfGroups; i++) {\n  groups.add({\n    id: i,\n    content: \"Truck&amp;nbsp;\" + i,\n  });\n}\n\n// create items\nvar numberOfItems = 10;\nvar items = new vis.DataSet();\n\nvar itemsPerGroup = Math.round(numberOfItems / numberOfGroups);\n\nfor (var truck = 0; truck < numberOfGroups; truck++) {\n  var date = new Date();\n  for (var order = 0; order < itemsPerGroup; order++) {\n    date.setHours(date.getHours() + 4 * (Math.random() < 0.2));\n    var start = new Date(date);\n\n    date.setHours(date.getHours() + 2 + Math.floor(Math.random() * 4));\n    var end = new Date(date);\n\n    items.add({\n      id: order + itemsPerGroup * truck,\n      group: truck,\n      start: start,\n      end: end,\n      content: \"Order \" + order,\n    });\n  }\n}\n\n// specify options\nvar options = {\n  stack: true,\n  start: new Date(),\n  end: new Date(1000 * 60 * 60 * 24 + new Date().valueOf()),\n  editable: true,\n  orientation: \"top\",\n  onDropObjectOnItem: function (objectData, item, callback) {\n    if (!item) {\n      return;\n    }\n    alert(\n      &apos;dropped object with content: \"&apos; +\n        objectData.content +\n        &apos;\" to item: \"&apos; +\n        item.content +\n        &apos;\"&apos;,\n    );\n  },\n};\n\n// create a Timeline\nvar container = document.getElementById(\"visualization\");\ntimeline1 = new vis.Timeline(container, items, groups, options);\n\nfunction handleDragStart(event) {\n  var dragSrcEl = event.target;\n\n  event.dataTransfer.effectAllowed = \"move\";\n  var itemType = event.target.innerHTML.split(\"-\")[1].trim();\n  var item = {\n    id: new Date(),\n    type: itemType,\n    content: event.target.innerHTML.split(\"-\")[0].trim(),\n  };\n\n  var isFixedTimes =\n    event.target.innerHTML.split(\"-\")[2] &amp;&amp;\n    event.target.innerHTML.split(\"-\")[2].trim() == \"fixed times\";\n  if (isFixedTimes) {\n    item.start = new Date();\n    item.end = new Date(1000 * 60 * 10 + new Date().valueOf());\n  }\n  event.dataTransfer.setData(\"text\", JSON.stringify(item));\n}\n\nfunction handleObjectItemDragStart(event) {\n  var dragSrcEl = event.target;\n\n  event.dataTransfer.effectAllowed = \"move\";\n  var objectItem = {\n    content: \"objectItemData\",\n    target: \"item\",\n  };\n  event.dataTransfer.setData(\"text\", JSON.stringify(objectItem));\n}\n\nvar items = document.querySelectorAll(\".items .item\");\n\nvar objectItems = document.querySelectorAll(\".object-item\");\n\nfor (var i = items.length - 1; i >= 0; i--) {\n  var item = items[i];\n  item.addEventListener(\"dragstart\", handleDragStart.bind(this), false);\n}\n\nfor (var i = objectItems.length - 1; i >= 0; i--) {\n  var objectItem = objectItems[i];\n  objectItem.addEventListener(\n    \"dragstart\",\n    handleObjectItemDragStart.bind(this),\n    false,\n  );\n}\n","js_external":"https://visjs.github.io/vis-timeline/standalone/umd/vis-timeline-graph2d.min.js","title":"Timeline | other | Drag &amp; Drop"}'
      />
      <button id="open" alt="JSFiddle" title="JSFiddle">Open CodePen</button>
    </form>

    <script type="text/javascript">
      document.getElementById("open").click();
    </script>
  </body>
</html>
